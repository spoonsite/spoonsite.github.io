<!DOCTYPE html>
<html>
  <head>
    <title>SPOON Site Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2020-07-14T14:53:58 MDT">
<title>Project Architecture :: SPOON Site Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

  <link href="/theme-original/variant-blue.css" rel="stylesheet">


<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/dev/architecture/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <h4 style="color:white;">SPOON Documentation</h4>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/user/" class="dd-item haschildren
        ">
      <div>
      <a href="/user/">User</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/user/howtoregister/" class="dd-item">
        <div>
          <a href="/user/howtoregister/">
            How to Register an Account with Spoon
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/userguide/" class="dd-item">
        <div>
          <a href="/user/userguide/">
            User Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/unitlegend/" class="dd-item">
        <div>
          <a href="/user/unitlegend/">
            Unit Legend
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/advancedsearching/" class="dd-item">
        <div>
          <a href="/user/advancedsearching/">
            Advanced Searching
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/vendor/" class="dd-item
        ">
      <div>
      <a href="/vendor/">Vendor</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/applicationadmin/" class="dd-item haschildren
        ">
      <div>
      <a href="/applicationadmin/">Application Admin</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/applicationadmin/applicationmanagement/" class="dd-item">
        <div>
          <a href="/applicationadmin/applicationmanagement/">
            App Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/branding/" class="dd-item">
        <div>
          <a href="/applicationadmin/branding/">
            Branding
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/system/" class="dd-item">
        <div>
          <a href="/applicationadmin/system/">
            System
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/securityroles/" class="dd-item">
        <div>
          <a href="/applicationadmin/securityroles/">
            Security Roles
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/datamanagement/" class="dd-item">
        <div>
          <a href="/applicationadmin/datamanagement/">
            Data Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/attributes/" class="dd-item">
        <div>
          <a href="/applicationadmin/attributes/">
            Attributes and Entry Types
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/customsubmissionforms/" class="dd-item">
        <div>
          <a href="/applicationadmin/customsubmissionforms/">
            Custom Submission Forms
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/userdata/" class="dd-item">
        <div>
          <a href="/applicationadmin/userdata/">
            User Data Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/workplans/" class="dd-item">
        <div>
          <a href="/applicationadmin/workplans/">
            Workplans
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/evaluations/" class="dd-item">
        <div>
          <a href="/applicationadmin/evaluations/">
            Evaluations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/systemadmin/" class="dd-item haschildren
        ">
      <div>
      <a href="/systemadmin/">System Admin</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/systemadmin/setup/" class="dd-item">
        <div>
          <a href="/systemadmin/setup/">
            Setup
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/docker/" class="dd-item">
        <div>
          <a href="/systemadmin/docker/">
            Docker
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/administratorguide/" class="dd-item">
        <div>
          <a href="/systemadmin/administratorguide/">
            Administrator Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/datamigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/datamigrationguide/">
            Data Migration Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/versionmigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/versionmigrationguide/">
            Version Migration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/dev/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/dev/">Developer</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/developersguide/" class="dd-item">
        <div>
          <a href="/dev/developersguide/">
            Developer Setup Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/mongosetupguide/" class="dd-item">
        <div>
          <a href="/dev/mongosetupguide/">
            MongoDB Setup Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/architecture/" class="dd-item active">
        <div>
          <a href="/dev/architecture/">
            Project Architecture
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
    <li data-nav-id="/dev/codestandards/" class="dd-item haschildren
        ">
      <div>
      <a href="/dev/codestandards/">Coding Standards</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/codestandards/front-end-code-standard/" class="dd-item">
        <div>
          <a href="/dev/codestandards/front-end-code-standard/">
            Front-end Code Standards
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/codestandards/server-code-standard/" class="dd-item">
        <div>
          <a href="/dev/codestandards/server-code-standard/">
            Server Code Standard
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/tutorials/" class="dd-item
        ">
      <div>
      <a href="/tutorials/">Tutorial Videos</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/releasenotes/" class="dd-item
        ">
      <div>
      <a href="/releasenotes/">Release Notes</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/summaryofspoon/" class="dd-item
        ">
      <div>
      <a href="/summaryofspoon/">Features and Summary of SPOON</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/spoonsite/spoon/tree/master" target="_blank" rel="noopener"><i class='fa fa-github'></i> Github repo</a></li>
                <li class="" role=""><a href="https://github.com/spoonsite/spoon/releases" target="_blank" rel="noopener"><i class='fa fa-download'></i> Releases</a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer"><div style="color: #E0E0DA;">
    <p>SPOONsite version 2.12.2</p>
    <p>Documentation generated on Jul 14, 2020</p>
    <p>Created using <a href="https://gohugo.io/">Hugo</a> version 0.55.3</p>
</div>
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/spoonsite/spoon/edit/master/Hugo-StaticGen-Docs/content/dev/Architecture.md" target="blank">
        <i class="fa fa-code-fork"></i>
        Improve this page
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/'>SPOON Documentation</a> > <a href='/dev/'>Developer</a> > Project Architecture

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#client-architecture">Client Architecture</a>
<ul>
<li><a href="#client-details">Client Details</a></li>
</ul></li>
<li><a href="#server-architecture">Server Architecture</a>
<ul>
<li><a href="#server-details">Server Details</a></li>
</ul></li>
<li><a href="#storage-details">Storage Details</a></li>
<li><a href="#runtime-environment">Runtime Environment</a>
<ul>
<li><a href="#runtime-details">Runtime Details</a></li>
<li><a href="#runtime-component-integration-vectors">Runtime Component Integration Vectors</a></li>
<li><a href="#component-integration-vectors-details">Component Integration Vectors Details</a></li>
<li><a href="#ports">Ports</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Project Architecture</h1>
  



    
    
    
    <p>This guide describes the high-level design of the server and client architecture.</p>

<h2 id="client-architecture">Client Architecture</h2>

<figure>
    <img src="/images/client-archtechture-new.png"
         alt="Client Architecture Diagram"/> <figcaption>
            <h4>Client Architecture Diagram</h4>
        </figcaption>
</figure>


<h3 id="client-details">Client Details</h3>

<p>The client core structure is based on Ext.js which provides UI components and utilities. This significantly reduces third-party dependencies which in turn reduces maintenance, shortens the learning curve, and improves quality and consistency.</p>

<p>In addition, there are application-specific overrides and high-level components created to facilitate reuse.
The application is composed by stripes layouts with a top-level page and fragment tool pages.</p>

<h2 id="server-architecture">Server Architecture</h2>

<figure>
    <img src="/images/serverarch.png"
         alt="Server Architecture Diagram"/> <figcaption>
            <h4>Server Architecture Diagram</h4>
        </figcaption>
</figure>


<h3 id="server-details">Server Details</h3>

<p>Component definitions are as follows:</p>

<ul>
<li><strong>Security</strong> - Authentication and authorization is delegated to OpenAM. This is configured through a custom realm using the Apache Shiro library. All requests are passed through this filter.</li>
<li><strong>REST API</strong> - The REST API is the component that handles the data interaction between the clients and provides the interface through which the clients can communicate. The REST API (application programming interface) is broken into two sections: resources and services. Resources handle the CRUD (create, reade, update, and delete) operations on the data. Services handle operations across data sets. This provides a clean and clear API for integrators.</li>
<li><strong>API Docs</strong> - The API docs are generated live based on the currently running code. This keeps the documents always current and reduces maintenance. Other system-related call-backs (e.g., retrieving binary resources, login handling, etc.) are handled through the Stripes framework.</li>
<li><strong>Business Layer</strong>  - Handles all rules applied to the data as well transaction support.</li>
<li><strong>Managers</strong> - The role of the manager class is to handle the interaction with a resource. This enables clean initialization and shutdown of resources and provides centralized access.</li>
<li><strong>Services</strong> - Each service is in charge of handling a specific group of Entity models. Services provide transaction support and business logic handling. All services are accessed through a service proxy class.  The service proxy class provides auto transaction and service interception support.</li>
<li><strong>Models</strong>  - The entity models represent the data in the system and provide the bridge from the application to the underlying storage.</li>
<li><strong>Import / Export</strong> - Provides a mechanism for loading and transferring data from one system to another.</li>
</ul>

<p>The server build environment relies on the following platforms/tools:</p>

<ul>
<li><strong>Java</strong> - Core language and platform</li>
<li><strong>Maven</strong> - Used for the project structure, building, and dependency management</li>
</ul>

<h2 id="storage-details">Storage Details</h2>

<figure>
    <img src="/images/storage.png"
         alt="Storage Diagram"/> <figcaption>
            <h4>Storage Diagram</h4>
        </figcaption>
</figure>


<p><strong>File System</strong>  - Holds configuration, resources, media, imports, reports and plugins. By default, under <code>/var/openstorefront</code> it can be changed by setting the system property <code>-Dapplication.datadir=&lt;directory&gt;</code> on the command line.</p>

<p><strong>Elasticsearch</strong> - Used to perform fuzzy index searches across the entries. It is kept in sync by the application.</p>

<p><strong>Database</strong> - Holds all entry data and application data.</p>

<h2 id="runtime-environment">Runtime Environment</h2>

<figure>
    <img src="/images/deployarch.png"
         alt="Runtime Environment Diagram"/> <figcaption>
            <h4>Runtime Environment Diagram</h4>
        </figcaption>
</figure>


<h3 id="runtime-details">Runtime Details</h3>

<p>The runtime environment relies upon the following applications:</p>

<ul>
<li><strong>Proxy Server</strong> - This is an external system that proxies requests to the application server.</li>
<li><strong>Tomcat 7</strong> - Tomcat is the web container used to host the storefront application.</li>
<li><strong>Java 8</strong> - Is the runtime platform that runs Tomcat.</li>
<li><strong>OS/VM</strong> - Is the host machines operating system.</li>
<li><strong>OpenAM</strong> - OpenAM runs externally and a policy agent in Tomcat ensures the site is secure.</li>
</ul>

<h3 id="runtime-component-integration-vectors">Runtime Component Integration Vectors</h3>

<figure>
    <img src="/images/civarch.png"
         alt="Runtime Component Integration Vectors"/> <figcaption>
            <h4>Runtime Component Integration Vectors</h4>
        </figcaption>
</figure>


<h3 id="component-integration-vectors-details">Component Integration Vectors Details</h3>

<p>The component integration vectors (CIV) are shown below.</p>

<table>
<thead>
<tr>
<th>Source Component</th>
<th>Class</th>
<th>Target Component</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>openstorefront</td>
<td>C</td>
<td>Elasticsearch</td>
<td></td>
</tr>

<tr>
<td>openstorefront</td>
<td>C</td>
<td>OpenAM</td>
<td>OpenAM with their policy agent requires a hard tie to the application and server</td>
</tr>

<tr>
<td>openstorefront</td>
<td>B</td>
<td>Elasticsearch</td>
<td>JEE Application Server currently configured to deploy on Tomcat</td>
</tr>

<tr>
<td>JEE Application Server</td>
<td>A</td>
<td>OS/VM</td>
<td>Currently targeted for CentOS</td>
</tr>
</tbody>
</table>

<hr />

<p>The CIVs represent an integration activity involving a source, Component
A, and a target, Component B.</p>

<p>The CIVs, as defined by the DI2E PMO, are as follows:</p>

<ul>
<li><p><strong>Class A: A-deployed On-B</strong>. Component B is the underlying
environment (providing resources) for A; B does not actively manage
A (e.g., OS, VM).</p></li>

<li><p><strong>Class B: A-contained In-B</strong>. Component &ldquo;lives in&rdquo;  B; B manages
the lifecycle of A, from cradle to grave. (e.g., Widget in OWF; EJB
in JEE server; OSGi bundle in Karaf; SCA).</p></li>

<li><p><strong>Class C: A-interfaces With-B</strong>. Component A initiates
communication with B via API(s). (e.g., JDBC, JMS, REST/SOAP call,
legacy communications).</p></li>

<li><p><strong>Class D: A-indirectly Consumes-B</strong>. Component A has a dependency
o.n data/functionality of B even though it doesn&rsquo;t interface with B.
(e.g., subscriber/publisher relationship; A integrates with another
component that offers data from B).</p></li>
</ul>

<h3 id="ports">Ports</h3>

<p>The applicable ports are shown below:</p>

<table>
<thead>
<tr>
<th>Port (Default)</th>
<th>Description</th>
<th>Type</th>
</tr>
</thead>

<tbody>
<tr>
<td>8080</td>
<td>Tomcat HTTP</td>
<td>Inbound</td>
</tr>

<tr>
<td>8009</td>
<td>Tomcat AJP</td>
<td>Inbound (Open if not using 8080)</td>
</tr>

<tr>
<td>9200</td>
<td>Elasticsearch (Accepts JSON)</td>
<td>Outbound (Does not need to be exposed outside the system)</td>
</tr>

<tr>
<td>9300</td>
<td>Elasticsearch (Accepts Binary)</td>
<td>Outbound (Does not need to be exposed outside the system)</td>
</tr>
</tbody>
</table>

<hr />

<p>All ports are configurable via configuration for the respected applications. Additional ports maybe be used depending on configuration.</p>

    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/dev/mongosetupguide/" title="MongoDB Setup Guide"> <i class="fa fa-chevron-left"></i><label>MongoDB Setup Guide</label></a>
    <a class="nav nav-next" href="/dev/codestandards/" title="Coding Standards" style="margin-right: 0px;"><label>Coding Standards</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>