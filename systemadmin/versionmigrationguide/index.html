<!DOCTYPE html>
<html>
  <head>
    <title>SPOON Site Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2020-03-30T11:30:00 MDT">
<title>Version Migration :: SPOON Site Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

  <link href="/theme-original/variant-blue.css" rel="stylesheet">


<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/systemadmin/versionmigrationguide/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <h4 style="color:white;">SPOON Documentation</h4>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/user/" class="dd-item haschildren
        ">
      <div>
      <a href="/user/">User</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/user/howtoregister/" class="dd-item">
        <div>
          <a href="/user/howtoregister/">
            How to Register an Account with Spoon
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/userguide/" class="dd-item">
        <div>
          <a href="/user/userguide/">
            User Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/unitlegend/" class="dd-item">
        <div>
          <a href="/user/unitlegend/">
            Unit Legend
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/advancedsearching/" class="dd-item">
        <div>
          <a href="/user/advancedsearching/">
            Advanced Searching
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/vendor/" class="dd-item
        ">
      <div>
      <a href="/vendor/">Vendor</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/applicationadmin/" class="dd-item haschildren
        ">
      <div>
      <a href="/applicationadmin/">Application Admin</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/applicationadmin/applicationmanagement/" class="dd-item">
        <div>
          <a href="/applicationadmin/applicationmanagement/">
            App Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/branding/" class="dd-item">
        <div>
          <a href="/applicationadmin/branding/">
            Branding
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/system/" class="dd-item">
        <div>
          <a href="/applicationadmin/system/">
            System
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/securityroles/" class="dd-item">
        <div>
          <a href="/applicationadmin/securityroles/">
            Security Roles
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/datamanagement/" class="dd-item">
        <div>
          <a href="/applicationadmin/datamanagement/">
            Data Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/attributes/" class="dd-item">
        <div>
          <a href="/applicationadmin/attributes/">
            Attributes and Entry Types
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/customsubmissionforms/" class="dd-item">
        <div>
          <a href="/applicationadmin/customsubmissionforms/">
            Custom Submission Forms
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/userdata/" class="dd-item">
        <div>
          <a href="/applicationadmin/userdata/">
            User Data Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/workplans/" class="dd-item">
        <div>
          <a href="/applicationadmin/workplans/">
            Workplans
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/evaluations/" class="dd-item">
        <div>
          <a href="/applicationadmin/evaluations/">
            Evaluations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/systemadmin/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/systemadmin/">System Admin</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/systemadmin/setup/" class="dd-item">
        <div>
          <a href="/systemadmin/setup/">
            Setup
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/docker/" class="dd-item">
        <div>
          <a href="/systemadmin/docker/">
            Docker
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/administratorguide/" class="dd-item">
        <div>
          <a href="/systemadmin/administratorguide/">
            Administrator Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/datamigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/datamigrationguide/">
            Data Migration Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/versionmigrationguide/" class="dd-item active">
        <div>
          <a href="/systemadmin/versionmigrationguide/">
            Version Migration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/dev/" class="dd-item haschildren
        ">
      <div>
      <a href="/dev/">Developer</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/developersguide/" class="dd-item">
        <div>
          <a href="/dev/developersguide/">
            Developer Setup Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/mongosetupguide/" class="dd-item">
        <div>
          <a href="/dev/mongosetupguide/">
            MongoDB Setup Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/architecture/" class="dd-item">
        <div>
          <a href="/dev/architecture/">
            Project Architecture
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
    <li data-nav-id="/dev/codestandards/" class="dd-item haschildren
        ">
      <div>
      <a href="/dev/codestandards/">Coding Standards</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/codestandards/front-end-code-standard/" class="dd-item">
        <div>
          <a href="/dev/codestandards/front-end-code-standard/">
            Front-end Code Standards
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/codestandards/server-code-standard/" class="dd-item">
        <div>
          <a href="/dev/codestandards/server-code-standard/">
            Server Code Standard
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/tutorials/" class="dd-item
        ">
      <div>
      <a href="/tutorials/">Tutorial Videos</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/releasenotes/" class="dd-item
        ">
      <div>
      <a href="/releasenotes/">Release Notes</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/summaryofspoon/" class="dd-item
        ">
      <div>
      <a href="/summaryofspoon/">Features and Summary of SPOON</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/spoonsite/spoon/tree/master" target="_blank" rel="noopener"><i class='fa fa-github'></i> Github repo</a></li>
                <li class="" role=""><a href="https://github.com/spoonsite/spoon/releases" target="_blank" rel="noopener"><i class='fa fa-download'></i> Releases</a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer"><div style="color: #E0E0DA;">
    <p>SPOONsite version 2.12.1</p>
    <p>Documentation generated on Mar 30, 2020</p>
    <p>Created using <a href="https://gohugo.io/">Hugo</a> version 0.55.3</p>
</div>
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/spoonsite/spoon/edit/master/Hugo-StaticGen-Docs/content/systemadmin/VersionMigrationGuide.md" target="blank">
        <i class="fa fa-code-fork"></i>
        Improve this page
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/'>SPOON Documentation</a> > <a href='/systemadmin/'>System Admin</a> > Version Migration

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Version Migration</h1>
  



    
    
    
    <p>This guide details changes and upgrades that have happened from version to version.</p>

<p>In general, you should always upgrade one version at a time in order (i.e., going from 2.2 to 2.4, then 2.2 to 2.3, then to 2.4).This will ensure data migrations will occur in the proper order. If you start from the latest version and have no data then migration is not needed.</p>

<h2 id="note-v211">Note: v2.11</h2>

<p>Mongo DB support was added. Orient is still used the default database unless configured otherwise.</p>

<ol>
<li><p>Install MongoDB 4.2.1. This can be done through <code>yum</code>. See the <a href="https://docs.mongodb.com/v4.2/tutorial/install-mongodb-on-red-hat/">MongoDB documentation</a></p></li>

<li><p>Add/edit application properties</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">db.use.mongo</span><span style="color:#f92672">=</span><span style="color:#e6db74">true</span>
<span style="color:#a6e22e">mongo.connection.url</span><span style="color:#f92672">=</span><span style="color:#e6db74">mongodb://localhost:27017</span></code></pre></div></li>

<li><p>Either deploy 2.11 or, if already deployed, then restart the server for the change to take effect</p>

<p>The data migration process will apply automatically if the following conditions are met:</p>

<ol>
<li><p>Configured to use Mongo</p></li>

<li><p>There was an previous Orient Install (as determined by the db file directory)</p></li>

<li><p>If the migration hasn't already been applied</p></li>
</ol>

<p>To force it to re-apply remove the <code>DB-MIGRATION-Mongo_STATUS, DB-MIGRATION-Mongo_LASTRUN_DTS</code> Application Properties
from the database by using the application system UI or by using an external tool.</p>

<p>Generally the migration process is expected to only take about 1-2 minutes, but it depends on the size of database and system resources.</p></li>
</ol>

<div class="notices warning" >
The data migration will remove existing Mongo "Storefront" database collections and replace the content from the equivalent
Orient data. Orient's data is not affected by the migration, so the process can be repeated.
</div>

<h2 id="note-v210">Note: v2.10</h2>

<p>This version requires an upgrade to Elasticsearch 7.2.1. This can be done through an RPM. See the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.2/rpm.html">Elasticsearch documentation</a>.</p>

<h2 id="note-v263">Note: v2.6.3</h2>

<p>For existing applications, update <strong>var/openstorefront/config/shiro.ini</strong>.</p>

<p>Add:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#a6e22e">/login/**</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">anon</span>
<span style="color:#a6e22e">/mobile/**</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">authc</span>
<span style="color:#a6e22e">/api/v1/resource/branding/current</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">anon</span>
<span style="color:#a6e22e">/api/v1/resource/securitypolicy</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">anon</span>
<span style="color:#a6e22e">/api/v1/resource/faq/*</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">anon</span>
<span style="color:#a6e22e">/api/v1/resource/faq</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">anon</span>
<span style="color:#a6e22e">/api/v1/resource/feedbacktickets</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">anon</span></code></pre></div>
<h2 id="note-v26">Note: v2.6</h2>

<p>Some features such as custom submission require new permissions (See <strong>Admin</strong> -&gt; <strong>Security Roles</strong> to add new permissions).</p>

<h2 id="note-v243">Note: v2.4.3</h2>

<p>This includes the database upgrade. Note: Rollback to previous storefront version will require a restore from a backup prior to 2.4.3 for existing data to work for that version.</p>

<p><strong>2.4.2</strong> must be deployed before 2.4.3 if you have existing data.</p>

<h2 id="note-v242">Note: v2.4.2</h2>

<p>Includes a database export and import in preparation for 2.4.3 upgrade of database. If you have an existing database, install 2.4.2 before 2.4.3.</p>

<ol>
<li>Shutdown app server</li>
<li>Backup /var/openstorefront/db directory</li>
<li>Install/deploy 2.4.2</li>
<li>Start app server</li>
</ol>

<p>You need to wait for 5-20 minutes (depending on size of DB) for the update to occur. During this time the application will be unavailable.</p>

<p>To manually export/import:</p>

<ol>
<li>Install Orient 2.1.25 to system to use console tool

<ol>
<li>Shut down app server</li>
</ol></li>
</ol>

<p>From Orient</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd bin
&gt;
$ ./console.sh <span style="color:#f92672">(</span>or bin/console.bat under Windows<span style="color:#f92672">)</span>
orientdb&gt; CONNECT plocal:/var/openstorefront/db/openstorefront &lt;DBuser&gt; &lt;db password
orientdb&gt; EXPORT DATABASE /temp/mydb.json.gz
orientdb&gt; DISCONNECT
orientdb&gt; CREATE DATABASE plocal:/var/openstorefront/db/openstorefront <span style="color:#f92672">(</span>only <span style="color:#66d9ef">do</span> this <span style="color:#66d9ef">if</span> you have move the old one out of the way<span style="color:#f92672">)</span>
orientdb&gt; IMPORT DATABASE /temp/mydb.json.gz</code></pre></div>
<h2 id="upgrading-from-v24-to-v25">Upgrading from v2.4 to v2.5</h2>

<p>Pre-Deployment</p>

<h3 id="elasticsearch">ElasticSearch</h3>

<p>Change the value of <strong>elastic.server.port</strong> in /var/openstorefront/config/<strong>openstorefront.properties</strong> from <strong>9300</strong> to <strong>9200</strong></p>

<p>Windows (manually)</p>

<ol>
<li>Install and extract Elasticsearch 5.6.3 on the system</li>
<li>Remove/delete the root directory of Elasticsearch 2.x from the system</li>
<li>Start Elasticsearch 5.6.3 (by running the elasticsearch-5.6.3/elasticsearch-5.6.3/elasticsearch.bat file)</li>
</ol>

<p>CentOS using Yum</p>

<p><em>Documentation on installation:</em>
<em><a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rpm.html">https://www.elastic.co/guide/en/elasticsearch/reference/5.6/rpm.html</a></em></p>

<ol>
<li>Download and install the public signing key</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch</code></pre></div>
<ol>
<li>Add the following in your /etc/yum.repos.d/ directory in a file with a .repo suffix, for example /etc/yum.repos.d/elasticsearch.repo</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[elasticsearch-6.x]</span>
<span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">Elasticsearch repository for 6.x packages</span>
<span style="color:#a6e22e">baseurl</span><span style="color:#f92672">=</span><span style="color:#e6db74">https://artifacts.elastic.co/packages/6.x/yum</span>
<span style="color:#a6e22e">gpgcheck</span><span style="color:#f92672">=</span><span style="color:#e6db74">1</span>
<span style="color:#a6e22e">gpgkey</span><span style="color:#f92672">=</span><span style="color:#e6db74">https://artifacts.elastic.co/GPG-KEY-elasticsearch</span>
<span style="color:#a6e22e">enabled</span><span style="color:#f92672">=</span><span style="color:#e6db74">1</span>
<span style="color:#a6e22e">autorefresh</span><span style="color:#f92672">=</span><span style="color:#e6db74">1</span>
<span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">rpm-md</span></code></pre></div>
<ol>
<li>Install Elasticsearch</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo yum install elasticsearch</code></pre></div>
<ol>
<li>Run Elasticsearch (with <strong>SysV init</strong>)</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># on system boot</span>
sudo chkconfig --add elasticsearch

<span style="color:#75715e"># manually</span>
sudo -i service elasticsearch start
sudo -i service elasticsearch stop</code></pre></div>
<ol>
<li>Run Elasticsearch (with <strong>systemd</strong>)</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># on system boot</span>
sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable elasticsearch.service

<span style="color:#75715e">#manually</span>
sudo systemctl start elasticsearch.service
sudo systemctl stop elasticsearch.service</code></pre></div>
<p>Elasticsearch service command reference (Elasticsearch should be running at this point):</p>

<p><strong>Start:</strong> systemctl start elasticsearch.service</p>

<p><strong>Stop:</strong> systemctl stop elasticsearch.service</p>

<p><strong>Test:</strong> curl -XGET 'localhost:9200/?pretty'</p>

<p>should give you a response something like this:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;Cp8oag6&#34;</span>,
  <span style="color:#f92672">&#34;cluster_name&#34;</span>: <span style="color:#e6db74">&#34;elasticsearch&#34;</span>,
  <span style="color:#f92672">&#34;cluster_uuid&#34;</span>: <span style="color:#e6db74">&#34;AT69_T_DTp-1qgIJlatQqA&#34;</span>,
  <span style="color:#f92672">&#34;version&#34;</span>: {
    <span style="color:#f92672">&#34;number&#34;</span>: <span style="color:#e6db74">&#34;5.4.3&#34;</span>,
    <span style="color:#f92672">&#34;build_hash&#34;</span>: <span style="color:#e6db74">&#34;f27399d&#34;</span>,
    <span style="color:#f92672">&#34;build_date&#34;</span>: <span style="color:#e6db74">&#34;2016-03-30T09:51:41.449Z&#34;</span>,
    <span style="color:#f92672">&#34;build_snapshot&#34;</span>: <span style="color:#66d9ef">false</span>,
    <span style="color:#f92672">&#34;lucene_version&#34;</span>: <span style="color:#e6db74">&#34;6.5.0&#34;</span>
  },
  <span style="color:#f92672">&#34;tagline&#34;</span>: <span style="color:#e6db74">&#34;You Know, for Search&#34;</span>
}</code></pre></div>
<p>Getting everything setup in SPOON:</p>

<ol>
<li>In Openstorefront, navigate to <strong>Admin Tools</strong> -&gt; <strong>Application Management</strong> -&gt; <strong>System</strong> -&gt; <strong>Search Control</strong></li>
<li>Click &quot;Re-Index Listings&quot;</li>
<li>(optional) If you haven't set the elastic.server.port to 9200, you can do so now from <strong>Admin Tools</strong> -&gt; <strong>App Management</strong>
-&gt; <strong>System</strong> -&gt; <strong>System Configuration Properties</strong></li>
</ol>

<h2 id="upgrading-from-v23-to-v24">Upgrading from v2.3 to v2.4</h2>

<div class="notices note" >
As part of the upgrade, Metadata will be automatically converted to Attributes. This may take a while if there is a lot of
Metadata associated with the entries. The server won't be available until the migration is complete.
</div>

<p>Pre-Deployment</p>

<ul>
<li>Edit /var/openstorefront/config/shiro.ini</li>
<li>Under [URL] section:
Confirm line &quot;/images&quot; is
<code>/images/* = anon</code></li>
<li>If not then update it</li>
<li>Then restart server if it's running to apply changes</li>
</ul>

<h2 id="upgrading-from-v22-to-v23">Upgrading from v2.2 to v2.3</h2>

<p>DI2E environments that use OpenAM should follow Jira ticket STORE-1243.</p>

<ol>
<li><strong>Update Security</strong> - If you haven't done any customization then the easiest upgrade path is to just remove the existing shiro.ini.

<ol>
<li>Delete /var/openstorefront/config/shiro.ini</li>
<li>On next server restart, the application will pull the default</li>
</ol></li>
</ol>

<p>Keep in mind this is for environments that use the built in user management rather than an external user management. The default shiro
config is set for the built in user management.</p>

<ol>
<li><p><strong>Update Database</strong> - 2.3 includes an update to the database.</p>

<ol>
<li>Make sure Tomcat is shutdown</li>
<li>Make a backup of existing db</li>
</ol></li>

<li><p>Copy /var/openstorefront/db directory to backup location</p>

<ol>
<li>Delete all /var/openstorefront/db/databases/openstorefront/openstorefront.*.wal files (just the WAL files, of which there may be
one or more; this appears to be optional)</li>
</ol></li>
</ol>

    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/systemadmin/datamigrationguide/" title="Data Migration Guide"> <i class="fa fa-chevron-left"></i><label>Data Migration Guide</label></a>
    <a class="nav nav-next" href="/dev/" title="Developer" style="margin-right: 0px;"><label>Developer</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>