<!DOCTYPE html>
<html>
  <head>
    <title>SPOON Site Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2021-02-10T11:01:28 MST">
<title>Administrator Guide :: SPOON Site Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

  <link href="/theme-original/variant-blue.css" rel="stylesheet">


<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/systemadmin/administratorguide/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <h4 style="color:white;">SPOON Documentation</h4>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/user/" class="dd-item haschildren
        ">
      <div>
      <a href="/user/">User</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/user/howtoregister/" class="dd-item">
        <div>
          <a href="/user/howtoregister/">
            How to Register an Account with Spoon
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/userguide/" class="dd-item">
        <div>
          <a href="/user/userguide/">
            User Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/unitlegend/" class="dd-item">
        <div>
          <a href="/user/unitlegend/">
            Unit Legend
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/advancedsearching/" class="dd-item">
        <div>
          <a href="/user/advancedsearching/">
            Advanced Searching
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/vendor/" class="dd-item
        ">
      <div>
      <a href="/vendor/">Vendor</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/applicationadmin/" class="dd-item haschildren
        ">
      <div>
      <a href="/applicationadmin/">Application Admin</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/applicationadmin/applicationmanagement/" class="dd-item">
        <div>
          <a href="/applicationadmin/applicationmanagement/">
            App Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/branding/" class="dd-item">
        <div>
          <a href="/applicationadmin/branding/">
            Branding
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/system/" class="dd-item">
        <div>
          <a href="/applicationadmin/system/">
            System
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/securityroles/" class="dd-item">
        <div>
          <a href="/applicationadmin/securityroles/">
            Security Roles
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/datamanagement/" class="dd-item">
        <div>
          <a href="/applicationadmin/datamanagement/">
            Data Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/attributes/" class="dd-item">
        <div>
          <a href="/applicationadmin/attributes/">
            Attributes and Entry Types
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/customsubmissionforms/" class="dd-item">
        <div>
          <a href="/applicationadmin/customsubmissionforms/">
            Custom Submission Forms
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/userdata/" class="dd-item">
        <div>
          <a href="/applicationadmin/userdata/">
            User Data Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/workplans/" class="dd-item">
        <div>
          <a href="/applicationadmin/workplans/">
            Workplans
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/evaluations/" class="dd-item">
        <div>
          <a href="/applicationadmin/evaluations/">
            Evaluations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/systemadmin/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/systemadmin/">System Admin</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/systemadmin/setup/" class="dd-item">
        <div>
          <a href="/systemadmin/setup/">
            Setup
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/docker/" class="dd-item">
        <div>
          <a href="/systemadmin/docker/">
            Docker
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/administratorguide/" class="dd-item active">
        <div>
          <a href="/systemadmin/administratorguide/">
            Administrator Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/datamigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/datamigrationguide/">
            Data Migration Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/versionmigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/versionmigrationguide/">
            Version Migration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/dev/" class="dd-item haschildren
        ">
      <div>
      <a href="/dev/">Developer</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/developersguide/" class="dd-item">
        <div>
          <a href="/dev/developersguide/">
            Developer Setup Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/mongosetupguide/" class="dd-item">
        <div>
          <a href="/dev/mongosetupguide/">
            MongoDB Setup Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/architecture/" class="dd-item">
        <div>
          <a href="/dev/architecture/">
            Project Architecture
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
    <li data-nav-id="/dev/codestandards/" class="dd-item haschildren
        ">
      <div>
      <a href="/dev/codestandards/">Coding Standards</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/codestandards/front-end-code-standard/" class="dd-item">
        <div>
          <a href="/dev/codestandards/front-end-code-standard/">
            Front-end Code Standards
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/codestandards/server-code-standard/" class="dd-item">
        <div>
          <a href="/dev/codestandards/server-code-standard/">
            Server Code Standard
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/tutorials/" class="dd-item
        ">
      <div>
      <a href="/tutorials/">Tutorial Videos</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/releasenotes/" class="dd-item
        ">
      <div>
      <a href="/releasenotes/">Release Notes</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/summaryofspoon/" class="dd-item
        ">
      <div>
      <a href="/summaryofspoon/">Features and Summary of SPOON</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/spoonsite/spoon/tree/master" target="_blank" rel="noopener"><i class='fa fa-github'></i> Github repo</a></li>
                <li class="" role=""><a href="https://github.com/spoonsite/spoon/releases" target="_blank" rel="noopener"><i class='fa fa-download'></i> Releases</a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer"><div style="color: #E0E0DA;">
    <p>SPOONsite version 2.12.3</p>
    <p>Documentation generated on Feb 10, 2021</p>
    <p>Created using <a href="https://gohugo.io/">Hugo</a> version 0.55.3</p>
</div>
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/spoonsite/spoon/edit/master/Hugo-StaticGen-Docs/content/systemadmin/AdministratorGuide.md" target="blank">
        <i class="fa fa-code-fork"></i>
        Improve this page
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/'>SPOON Documentation</a> > <a href='/systemadmin/'>System Admin</a> > Administrator Guide

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#related-documentation">Related Documentation</a></li>
<li><a href="#application-properties">Application Properties</a></li>
<li><a href="#configuration">Configuration</a>
<ul>
<li><a href="#ldap-configuration">LDAP Configuration</a>
<ul>
<li><a href="#database">Database</a></li>
<li><a href="#openam-request-header">OPENAM (Request Header)</a></li>
<li><a href="#integration-with-openam">Integration with OpenAM</a></li>
</ul></li>
</ul></li>
<li><a href="#user-types">User Types</a></li>
<li><a href="#database-management">Database Management</a>
<ul>
<li><a href="#refreshing-the-database">Refreshing the Database</a></li>
</ul></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Administrator Guide</h1>
  



    
    
    
    <p>This article gives further instructions on setting up and configuring the web application.</p>

<h2 id="related-documentation">Related Documentation</h2>

<p><a href="/dev/architecture/">Architecture</a></p>

<p><a href="/systemadmin/setup/">Setup</a></p>

<h2 id="application-properties">Application Properties</h2>

<p>Configure in: <code>/var/openstorefront/config/openstorefront.properties</code></p>

<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>

<tbody>
<tr>
<td><strong>Database</strong></td>
<td></td>
<td></td>
</tr>

<tr>
<td>db.connectionpool.min</td>
<td>DB min pool size</td>
<td>5</td>
</tr>

<tr>
<td>db.connectionpool.max</td>
<td>DB max pool size</td>
<td>40</td>
</tr>

<tr>
<td>db.user</td>
<td>Should match orientdb-server-config.xml</td>
<td>app</td>
</tr>

<tr>
<td>db.pw</td>
<td>Should match orientdb-server-config.xml</td>
<td>aPpw0rd!</td>
</tr>

<tr>
<td>db.use.mongo</td>
<td>If the application should use MongoDB instead of OrientDB</td>
<td>true</td>
</tr>

<tr>
<td>mongo.database</td>
<td>The name of the database in MongoDB</td>
<td>storefront</td>
</tr>

<tr>
<td>errorticket.max</td>
<td>Max amount of ticket to hold (culls the oldest records upon filling)</td>
<td>5000</td>
</tr>

<tr>
<td>trackingrecords.max.age.days</td>
<td>Max age of tracking records</td>
<td>365</td>
</tr>

<tr>
<td>external.usermanager</td>
<td>Specifies manager for external user management (LdapUserManager)</td>
<td>IniRealmManager</td>
</tr>

<tr>
<td>external.sync.activate</td>
<td>Set to true to run the sync</td>
<td>false</td>
</tr>

<tr>
<td>search.server</td>
<td>The search server that the application uses (must use Elasticsearch)</td>
<td>Elasticsearch</td>
</tr>

<tr>
<td>elastic.server.host</td>
<td>The hostname of the machine hosting Elasticsearch</td>
<td>localhost</td>
</tr>

<tr>
<td>elastic.server.port</td>
<td>The port that Elasticseach is using</td>
<td>9200</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>Security Header</strong></td>
<td><strong>Not in use for SPOON</strong></td>
<td></td>
</tr>

<tr>
<td>openam.url</td>
<td>http:/…/openam (Full URL to OpenAM instance)</td>
<td></td>
</tr>

<tr>
<td>logout.url</td>
<td>http:/…/openam/UI/Logout (Full URL to logout)</td>
<td></td>
</tr>

<tr>
<td>openam.header.username</td>
<td>HTTP Header for Username</td>
<td>sAMAccountName</td>
</tr>

<tr>
<td>openam.header.firstname</td>
<td>HTTP Header for Firstname</td>
<td>givenname</td>
</tr>

<tr>
<td>openam.header.lastname</td>
<td>HTTP Header for Lastname</td>
<td>sn</td>
</tr>

<tr>
<td>openam.header.email</td>
<td>HTTP Header for email</td>
<td>mail</td>
</tr>

<tr>
<td>openam.header.phone</td>
<td>HTTP Header for group</td>
<td>telephonenumber</td>
</tr>

<tr>
<td>openam.header.group</td>
<td>HTTP Header for ldapguid</td>
<td>memberOf</td>
</tr>

<tr>
<td>openam.header.ldapguid</td>
<td>HTTP Header for organization</td>
<td>memberid</td>
</tr>

<tr>
<td>openam.header.organization</td>
<td></td>
<td>company</td>
</tr>

<tr>
<td>openam.header.admingroupname</td>
<td>HTTP Header for Admin Group Name *Handles multiple values</td>
<td>STOREFRONT-Admin</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>Security</strong></td>
<td></td>
<td></td>
</tr>

<tr>
<td>role.admin</td>
<td>Name of the Admin Role</td>
<td>STOREFRONT-Admin</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>Dev Tools Login</strong></td>
<td><strong>Not in use for SPOON</strong></td>
<td></td>
</tr>

<tr>
<td>tools.login.user</td>
<td></td>
<td></td>
</tr>

<tr>
<td>tools.login.pw</td>
<td></td>
<td></td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>Jira Integration</strong></td>
<td><strong>Deprecated</strong></td>
<td></td>
</tr>

<tr>
<td>jira.connectionpool.size</td>
<td></td>
<td>20</td>
</tr>

<tr>
<td>jira.connection.wait.seconds</td>
<td></td>
<td>60</td>
</tr>

<tr>
<td>jira.server.url</td>
<td></td>
<td><a href="https://jira.di2e.net">https://jira.di2e.net</a></td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>Job management</strong></td>
<td></td>
<td></td>
</tr>

<tr>
<td>job.working.state.override.minutes</td>
<td>Max job running time, used for Integrations</td>
<td>30</td>
</tr>

<tr>
<td>task.complete.expireminutes</td>
<td></td>
<td>5</td>
</tr>

<tr>
<td>task.error.expireminutes</td>
<td></td>
<td>4320</td>
</tr>

<tr>
<td>report.lifetime</td>
<td>How long will this report be in the system?</td>
<td>180</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>Email Support</strong></td>
<td></td>
<td></td>
</tr>

<tr>
<td>mail.smtp.url</td>
<td>Login Credentials for Integrations (currently just for Jira)</td>
<td>localhost</td>
</tr>

<tr>
<td>mail.server.user</td>
<td>Login Credentials for mail server</td>
<td></td>
</tr>

<tr>
<td>mail.server.pw</td>
<td>Login Credentials for mail server</td>
<td></td>
</tr>

<tr>
<td>mail.smtp.port</td>
<td>Mail Port (25 common)</td>
<td></td>
</tr>

<tr>
<td>mail.use.ssl</td>
<td>Set to true if server requires it</td>
<td></td>
</tr>

<tr>
<td>mail.use.tls</td>
<td>Set to true if server requires it</td>
<td></td>
</tr>

<tr>
<td>mail.from.name</td>
<td>From Name</td>
<td>Storefront Notification</td>
</tr>

<tr>
<td>mail.from.address</td>
<td>From Email Address</td>
<td>donotreply@storefront.net</td>
</tr>

<tr>
<td>mail.reply.name</td>
<td>Reply name (usually display at the bottom of the message)</td>
<td></td>
</tr>

<tr>
<td>mail.reply.address</td>
<td>Reply email (usually display at the bottom of the message)</td>
<td></td>
</tr>

<tr>
<td>mail.attach.file</td>
<td>Set to true or false indicating if emails should contain attached files</td>
<td>0</td>
</tr>

<tr>
<td>message.archive.days</td>
<td>User message max age of archives</td>
<td>30</td>
</tr>

<tr>
<td>message.queue.minmintues</td>
<td>User message queue time or the time the message waits before sending</td>
<td>10</td>
</tr>

<tr>
<td>message.maxretires</td>
<td>Max times the user message will try to send if unable to deliver</td>
<td>5</td>
</tr>

<tr>
<td>message.recentchanges.days</td>
<td>Time between “recent changes” messages from being sent</td>
<td>28</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>General</strong></td>
<td></td>
<td></td>
</tr>

<tr>
<td>app.title</td>
<td>Title of the application. Used in emails but, also other places</td>
<td>Storefront</td>
</tr>

<tr>
<td>websockets.enabled</td>
<td>Enables the use of websockets for server notifications</td>
<td>false</td>
</tr>

<tr>
<td>userreview.autoapprove</td>
<td>Allows user submitted info to be automatically approved (reviews, ect.)</td>
<td>true</td>
</tr>

<tr>
<td>max.post.size</td>
<td>Maximum file size for files being saved to the system (in MB)</td>
<td>2000</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>LDAP Manager</strong></td>
<td><strong>Not in use for SPOON</strong></td>
<td></td>
</tr>

<tr>
<td>ldapmanager.url</td>
<td>Full URL to the LDAP</td>
<td></td>
</tr>

<tr>
<td>ldapmanager.userDnTemplate</td>
<td>uid={0},ou=users,dc=mycompany,dc=com; Reserved, not currently used</td>
<td></td>
</tr>

<tr>
<td>ldapmanager.authenticationMechanism</td>
<td>NONE, SIMPLE, DIGEST-MD5, etc.</td>
<td>SIMPLE</td>
</tr>

<tr>
<td>ldapmanager.security.sasl.realm</td>
<td>May be needed for SASL authentication</td>
<td></td>
</tr>

<tr>
<td>ldapmanager.binddn</td>
<td>The LDAP user to use in the connection (Full DN name)</td>
<td></td>
</tr>

<tr>
<td>ldapmanager.pw</td>
<td></td>
<td></td>
</tr>

<tr>
<td>ldapmanager.connectionTimeout</td>
<td></td>
<td>15000</td>
</tr>

<tr>
<td>ldapmanager.contextRoot</td>
<td>Root to directory to search</td>
<td></td>
</tr>

<tr>
<td>ldapmanager.attribute.username</td>
<td>Attribute to map to username</td>
<td>sAMAccountName</td>
</tr>

<tr>
<td>ldapmanager.attribute.email</td>
<td>Attribute to map to email</td>
<td>mail</td>
</tr>

<tr>
<td>ldapmanager.attribute.phone</td>
<td>Attribute to map to phone number</td>
<td>telephonenumber</td>
</tr>

<tr>
<td>ldapmanager.attribute.fullname</td>
<td>Attribute to map to fullname</td>
<td>name</td>
</tr>

<tr>
<td>ldapmanager.attribute.organization</td>
<td>Attribute to map to organization</td>
<td>company</td>
</tr>

<tr>
<td>ldapmanager.attribute.guid</td>
<td>Attribute to map to GUID</td>
<td>objectGUID</td>
</tr>

<tr>
<td></td>
<td></td>
<td></td>
</tr>

<tr>
<td><strong>Help</strong></td>
<td></td>
<td></td>
</tr>

<tr>
<td>help.url</td>
<td>The URL that hosts this documentation</td>
<td><a href="https://spoonsite.github.io/">https://spoonsite.github.io/</a></td>
</tr>
</tbody>
</table>

<h2 id="configuration">Configuration</h2>

<p>This section contains information on how to configure LDAP and OpenAM for SPOON. These features are currently inactive
on SPOON, but could be activated in the future.</p>

<h3 id="ldap-configuration">LDAP Configuration</h3>

<div class="notices warning" >
LDAP is currently not in use on SPOON.
</div>

<p>Configure in <code>/var/openstorefront/config/shiro.ini</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[main]</span>

<span style="color:#a6e22e">ldapRealm</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">org.apache.shiro.realm.ldap.JndiLdapRealm</span>

<span style="color:#a6e22e">ldapRealm.userDnTemplate</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">uid={0},ou=users,dc=mycompany,dc=com</span>

<span style="color:#a6e22e">ldapRealm.contextFactory.url</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">ldap://ldapHost:389</span>

<span style="color:#a6e22e">ldapRealm.contextFactory.authenticationMechanism</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">DIGEST-MD5</span>

<span style="color:#a6e22e">ldapRealm.contextFactory.environment[some.obscure.jndi.key]</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">some</span>
<span style="color:#a6e22e">value</span></code></pre></div>
<h4 id="database">Database</h4>

<p>See
<a href="http://stackoverflow.com/questions/17441019/how-to-configure-jdbcrealm-to-obtain-its-datasource-from-jndi">Configure JDBC Realm</a>
for how to configure JDBCRealm to obtain its DataSource from JNDI.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[main]</span>

<span style="color:#a6e22e">dataSource</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">org.apache.shiro.jndi.JndiObjectFactory</span>

<span style="color:#a6e22e">dataSource.resourceName</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">java://app/jdbc/myDataSource</span>

<span style="color:#a6e22e">jdbcRealm</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">org.apache.shiro.realm.jdbc.JdbcRealm</span>

<span style="color:#a6e22e">jdbcRealm.permissionsLookupEnabled</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">true</span>

<span style="color:#a6e22e">jdbcRealm.dataSource</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">$dataSource</span>

<span style="color:#75715e"># you can customize the authenticationQuery, userRolesQuery and permissionsQuery,  if needed.</span>

<span style="color:#a6e22e">securityManager.realms</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">$realm</span></code></pre></div>
<h4 id="openam-request-header">OPENAM (Request Header)</h4>

<div class="notices warning" >
OpenAM is currently not in use on SPOON.
</div>

<p>OpenAM configuration</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#66d9ef">[main]</span>

<span style="color:#75715e">#Also, remember to comment out the users and roles to remove the INIRealm</span>

<span style="color:#a6e22e">headerRealm</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">edu.usu.sdl.openstorefront.security.HeaderRealm</span>

<span style="color:#a6e22e">securityManager.realms</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">$headerRealm</span></code></pre></div>
<h4 id="integration-with-openam">Integration with OpenAM</h4>

<ol>
<li><p>Adjust the OpenAM agent filter</p>

<p>Change:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">    <span style="color:#f92672">&lt;filter-mapping&gt;</span>
        <span style="color:#f92672">&lt;filter-name&gt;</span>Agent<span style="color:#f92672">&lt;/filter-name&gt;</span>
        <span style="color:#f92672">&lt;url-pattern&gt;</span>/*<span style="color:#f92672">&lt;/url-pattern&gt;</span>
        <span style="color:#f92672">&lt;dispatcher&gt;</span>REQUEST<span style="color:#f92672">&lt;/dispatcher&gt;</span>
        <span style="color:#f92672">&lt;dispatcher&gt;</span>INCLUDE<span style="color:#f92672">&lt;/dispatcher&gt;</span>
        <span style="color:#f92672">&lt;dispatcher&gt;</span>FORWARD<span style="color:#f92672">&lt;/dispatcher&gt;</span>
        <span style="color:#f92672">&lt;dispatcher&gt;</span>ERROR<span style="color:#f92672">&lt;/dispatcher&gt;</span>
    <span style="color:#f92672">&lt;/filter-mapping&gt;</span></code></pre></div>
<p>To</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">    <span style="color:#f92672">&lt;filter-mapping&gt;</span>
        <span style="color:#f92672">&lt;filter-name&gt;</span>Agent<span style="color:#f92672">&lt;/filter-name&gt;</span>
        <span style="color:#f92672">&lt;url-pattern&gt;</span>/*<span style="color:#f92672">&lt;/url-pattern&gt;</span>
        <span style="color:#f92672">&lt;dispatcher&gt;</span>REQUEST<span style="color:#f92672">&lt;/dispatcher&gt;</span>
        <span style="color:#f92672">&lt;dispatcher&gt;</span>ERROR<span style="color:#f92672">&lt;/dispatcher&gt;</span>
    <span style="color:#f92672">&lt;/filter-mapping&gt;</span></code></pre></div></li>

<li><p>Update system properties configurations</p>

<p>See Security Header in <a href="#application-properties">Application Properties</a></p></li>
</ol>

<h2 id="user-types">User Types</h2>

<p>The user types are defined as based on the roles they belong to.</p>

<p>If using the built-in security, the system will create default roles for default users, admins and evaluators. It
will also create a default admin user: (admin / Secret1@).</p>

<div class="notices warning" >
You should change the admin password after login.
</div>

<p>Pre-defined groups:</p>

<p><strong>Default</strong> - Allows Searching, tagging, watching, and submitting entries</p>

<p><strong>Guest</strong> -Permissions for guest user. (Only applies if security is setup for that)</p>

<p><strong>Admin</strong> - All administration permissions. There may be some optional features for which the admin doesn&rsquo;t have permission by default.</p>

<p><strong>Librarian</strong> -Data management permissions.</p>

<p><strong>Evaluators</strong> - Allows user to edit unpublished evaluations.</p>

<p>An admin can define new groups as needed.</p>

<div class="notices note" >
All users are part of the Default group.
</div>

<h2 id="database-management">Database Management</h2>

<p>The application handles all database interaction transparently, so direct database access and manipulation is not needed.</p>

<h3 id="refreshing-the-database">Refreshing the Database</h3>

<div class="notices warning" >
This will wipe out all data in the application. Data, such as User profiles, cannot be recovered. Component user data can
be preserved by performing an export from the component admin tool.
</div>

<p>Make a backup by copying all of the files in the /var/openstorefront/db directory or use the following console tools steps:</p>

<ol>
<li><p>Stop the Tomcat server (e.g. service tomcat stop)</p></li>

<li><p>Remove the folder /var/openstorefront/db</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">rm -rf /var/openstorefront/db</code></pre></div></li>

<li><p>Start the Tomcat server</p></li>
</ol>

<p>When the application loads it will create a new database and populate the data from whatever is currently in the import
folders (lookups only; attributes, component, articles will need to be manually triggered or uploaded via the <strong>Admin Tools</strong> UI).</p>

<p>The initial load of the application may take a few minutes. If the import directories are empty, the application will load
default lookup files that are packaged with the application.</p>

<h2 id="troubleshooting">Troubleshooting</h2>

<p>If Elasticsearch detects low disk space it will change into Read-Only mode at which point the index records can’t be changed
which, causing problems with searching and updating records.</p>

<p>To resolve:</p>

<ol>
<li><p>Correct the disk space issue</p></li>

<li><p>Force Elasticsearch out of read-only mode (this should only be done when the disk space issue cannot be resolved)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">curl -X PUT localhost:9200/_settings -H <span style="color:#e6db74">&#34;Content-Type: application/json&#34;</span> -d <span style="color:#e6db74">&#39;
</span><span style="color:#e6db74">{
</span><span style="color:#e6db74">    &#34;index&#34;: {
</span><span style="color:#e6db74">        &#34;blocks&#34;: {
</span><span style="color:#e6db74">            &#34;read_only_allow_delete&#34;: &#34;false&#34;
</span><span style="color:#e6db74">        }
</span><span style="color:#e6db74">    }
</span><span style="color:#e6db74">}&#39;</span></code></pre></div>
<p>Elasticsearch should respond with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
    <span style="color:#f92672">&#34;acknowledged&#34;</span>: <span style="color:#66d9ef">true</span>
}</code></pre></div></li>
</ol>

<p>See <a href="https://discuss.elastic.co/t/forbidden-12-index-read-only-allow-delete-api/110282/4">https://discuss.elastic.co/t/forbidden-12-index-read-only-allow-delete-api/110282/4</a></p>

    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/systemadmin/docker/" title="Docker"> <i class="fa fa-chevron-left"></i><label>Docker</label></a>
    <a class="nav nav-next" href="/systemadmin/datamigrationguide/" title="Data Migration Guide" style="margin-right: 0px;"><label>Data Migration Guide</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>