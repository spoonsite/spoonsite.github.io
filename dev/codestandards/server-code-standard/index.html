<!DOCTYPE html>
<html>
  <head>
    <title>SPOON Site Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2020-03-09T11:43:29 MDT">
<title>Server Code Standard :: SPOON Site Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

  <link href="/theme-original/variant-blue.css" rel="stylesheet">


<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/dev/codestandards/server-code-standard/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <h4 style="color:white;">SPOON Documentation</h4>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/user/" class="dd-item haschildren
        ">
      <div>
      <a href="/user/">User</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/user/howtoregister/" class="dd-item">
        <div>
          <a href="/user/howtoregister/">
            How to Register an Account with Spoon
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/userguide/" class="dd-item">
        <div>
          <a href="/user/userguide/">
            User Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/unitlegend/" class="dd-item">
        <div>
          <a href="/user/unitlegend/">
            Unit Legend
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/advancedsearching/" class="dd-item">
        <div>
          <a href="/user/advancedsearching/">
            Advanced Searching
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/vendor/" class="dd-item
        ">
      <div>
      <a href="/vendor/">Vendor</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/applicationadmin/" class="dd-item haschildren
        ">
      <div>
      <a href="/applicationadmin/">Application Admin</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/applicationadmin/applicationmanagement/" class="dd-item">
        <div>
          <a href="/applicationadmin/applicationmanagement/">
            App Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/branding/" class="dd-item">
        <div>
          <a href="/applicationadmin/branding/">
            Branding
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/system/" class="dd-item">
        <div>
          <a href="/applicationadmin/system/">
            System
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/securityroles/" class="dd-item">
        <div>
          <a href="/applicationadmin/securityroles/">
            Security Roles
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/datamanagement/" class="dd-item">
        <div>
          <a href="/applicationadmin/datamanagement/">
            Data Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/attributes/" class="dd-item">
        <div>
          <a href="/applicationadmin/attributes/">
            Attributes and Entry Types
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/customsubmissionforms/" class="dd-item">
        <div>
          <a href="/applicationadmin/customsubmissionforms/">
            Custom Submission Forms
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/userdata/" class="dd-item">
        <div>
          <a href="/applicationadmin/userdata/">
            User Data Management
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/workplans/" class="dd-item">
        <div>
          <a href="/applicationadmin/workplans/">
            Workplans
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/evaluations/" class="dd-item">
        <div>
          <a href="/applicationadmin/evaluations/">
            Evaluations
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/systemadmin/" class="dd-item haschildren
        ">
      <div>
      <a href="/systemadmin/">System Admin</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/systemadmin/setup/" class="dd-item">
        <div>
          <a href="/systemadmin/setup/">
            Setup
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/docker/" class="dd-item">
        <div>
          <a href="/systemadmin/docker/">
            Docker
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/administratorguide/" class="dd-item">
        <div>
          <a href="/systemadmin/administratorguide/">
            Administrator Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/datamigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/datamigrationguide/">
            Data Migration Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/versionmigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/versionmigrationguide/">
            Version Migration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/tutorials/" class="dd-item
        ">
      <div>
      <a href="/tutorials/">Tutorial Videos</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/dev/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/dev/">Developer</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/developersguide/" class="dd-item">
        <div>
          <a href="/dev/developersguide/">
            Developer Setup Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/mongosetupguide/" class="dd-item">
        <div>
          <a href="/dev/mongosetupguide/">
            MongoDB Setup Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/architecture/" class="dd-item">
        <div>
          <a href="/dev/architecture/">
            Project Architecture
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
    <li data-nav-id="/dev/codestandards/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/dev/codestandards/">Coding Standards</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/codestandards/front-end-code-standard/" class="dd-item">
        <div>
          <a href="/dev/codestandards/front-end-code-standard/">
            Front-end Code Standards
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/codestandards/server-code-standard/" class="dd-item active">
        <div>
          <a href="/dev/codestandards/server-code-standard/">
            Server Code Standard
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/releasenotes/" class="dd-item
        ">
      <div>
      <a href="/releasenotes/">Release Notes</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/summaryofspoon/" class="dd-item
        ">
      <div>
      <a href="/summaryofspoon/">Features and Summary of SPOON</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/spoonsite/spoon/tree/master" target="_blank" rel="noopener"><i class='fa fa-github'></i> Github repo</a></li>
                <li class="" role=""><a href="https://github.com/spoonsite/spoon/releases" target="_blank" rel="noopener"><i class='fa fa-download'></i> Releases</a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer"><div style="color: #E0E0DA;">
    <p>SPOONsite version 2.12.0</p>
    <p>Documentation generated on Mar 9, 2020</p>
    <p>Created using <a href="https://gohugo.io/">Hugo</a> version 0.40.1</p>
</div>
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/spoonsite/spoon/edit/master/Hugo-StaticGen-Docs/content/dev/CodeStandards/server-code-standard.md" target="blank">
        <i class="fa fa-code-fork"></i>
        Improve this page
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        










 <a href='/'>SPOON Documentation</a> > <a href='/dev/'>Developer</a> > <a href='/dev/codestandards/'>Coding Standards</a> > Server Code Standard

 

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#java-style-guide">Java Style Guide</a>
<ul>
<li><a href="#special-escape-sequences">Special escape sequences</a></li>
<li><a href="#non-ascii-characters">Non-ASCII characters</a></li>
<li><a href="#source-file-structure">Source file structure</a></li>
<li><a href="#wildcard-imports">Wildcard Imports</a></li>
<li><a href="#braces">Braces</a></li>
<li><a href="#naming-conventions">Naming Conventions</a>
<ul>
<li><a href="#package-names">Package names</a></li>
<li><a href="#class-names">Class names</a></li>
<li><a href="#method-names">Method names</a></li>
<li><a href="#constant-names">Constant names</a></li>
<li><a href="#non-constant-field-names">Non-constant field names</a></li>
<li><a href="#parameter-names">Parameter names</a></li>
<li><a href="#local-variable-names">Local variable names</a></li>
<li><a href="#type-variable-names">Type variable names</a></li>
</ul></li>
<li><a href="#caught-exceptions-not-ignored">Caught exceptions (not ignored)</a></li>
<li><a href="#static-members-qualified-using-class">Static members (qualified using class)</a></li>
<li><a href="#finalizers-not-used">Finalizers (not used)</a></li>
<li><a href="#javadocs">Javadocs</a></li>
</ul></li>
<li><a href="#general">General</a></li>
<li><a href="#entities">Entities</a></li>
<li><a href="#rest-api">REST API</a></li>
<li><a href="#cache-handling">Cache Handling</a></li>
<li><a href="#logging">Logging</a>
<ul>
<li><a href="#how-to-use-logging-tools">How To Use Logging Tools</a></li>
</ul></li>
<li><a href="#cross-cutting-concerns">Cross Cutting Concerns</a></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Server Code Standard</h1>
  



    
    
    
    <p>These are special notes when making additions to the server-side code.
</p>

<h2 id="java-style-guide">Java Style Guide</h2>

<p>In general, applying the IDE Formating and its default warnings are sufficient to follow and keep the code in-line. These standards borrow ideas from <a href="https://google.github.io/styleguide/javaguide.html">https://google.github.io/styleguide/javaguide.html</a></p>

<h3 id="special-escape-sequences">Special escape sequences</h3>

<p>For any character that has a special escape sequence (\b, \t, \n, \f, \r, \&ldquo;, \&rsquo; and \), that sequence is used rather than the corresponding octal (e.g., <code>\012</code>) or Unicode (e.g., <code>\u000a</code>) escape.</p>

<h3 id="non-ascii-characters">Non-ASCII characters</h3>

<p>For the remaining non-ASCII characters, either the actual Unicode character (e.g., <code>?</code>) or the equivalent Unicode escape (e.g., <code>\u221e</code>) is used. The choice depends only on which makes the code easier to read and understand, although Unicode escapes outside string literals and comments are strongly discouraged.</p>

<p>Tip: In the Unicode escape case, and occasionally even when actual Unicode characters are used, an explanatory comment can be very helpful.</p>

<h3 id="source-file-structure">Source file structure</h3>

<p>A source file consists of, in order:</p>

<ol>
<li>License or copyright information (use Apache V2 on java side, GPL on front-end; the whole project is GPL)</li>
<li>Package statement</li>
<li>Import statements</li>
<li>Exactly one top-level class</li>
</ol>

<p><strong>Exactly one blank line</strong> separates each section that is present</p>

<h3 id="wildcard-imports">Wildcard Imports</h3>

<ul>
<li>Avoid wildcard imports, let the IDE import the required classes</li>
<li>Let the IDE order the imports</li>
</ul>

<h3 id="braces">Braces</h3>

<ul>
<li>Use IDE Formating</li>
<li>Change need to be agreed upon and update in the formatter</li>
</ul>

<h3 id="naming-conventions">Naming Conventions</h3>

<ul>
<li>Names need to be descriptive</li>
<li>Lower-case to start and camelCase</li>
<li>The ordering of the name is object owner and then object name. For example: componentResource, means resource is part of or owned by component.</li>
<li>Typically, classes are labeled according to function (e.g., ComponentService)</li>
</ul>

<h4 id="package-names">Package names</h4>

<p>Package names are all lowercase, with consecutive words simply concatenated together (no underscores). For example, com.example.deepspace, not com.example.deepSpace or com.example.deep_space.</p>

<h4 id="class-names">Class names</h4>

<ul>
<li>Class names are written in UpperCamelCase.</li>
<li>Class names are typically nouns or noun phrases (e.g., Character or ImmutableList)</li>
<li>Interface names may also be nouns or noun phrases (e.g., List), but may sometimes be adjectives or adjective phrases instead (e.g., Readable)</li>
<li>Test classes are named starting with the name of the class they are testing, and ending with Test (e.g., HashTest or HashIntegrationTest)</li>
<li>There are no specific rules or even well-established conventions for naming annotation types</li>
</ul>

<h4 id="method-names">Method names</h4>

<ul>
<li>Method names are written in lowerCamelCase.</li>
<li>Method names are typically verbs or verb phrases (e.g., sendMessage or stop)</li>
<li>Underscores may appear in JUnit test method names to separate logical components of the name, with each component written in lowerCamelCase. One typical pattern is <methodUnderTest>_<state>, for example pop_emptyStack. There is no one correct way to name test methods.</li>
</ul>

<h4 id="constant-names">Constant names</h4>

<p>Constant names use CONSTANT_CASE: all uppercase letters, with each word separated from the next by a single underscore.</p>

<p>Constants are static final fields whose contents are deeply immutable and whose methods have no detectable side effects. This includes primitives, Strings, immutable types, and immutable collections of immutable types. If any of the instance&rsquo;s observable state can change, it is not a constant. Merely intending to never mutate the object is not enough.</p>

<h4 id="non-constant-field-names">Non-constant field names</h4>

<ul>
<li>Non-constant field names (static or otherwise) are written in lowerCamelCase</li>
<li>These names are typically nouns or noun phrases (e.g., computedValues or index)</li>
</ul>

<h4 id="parameter-names">Parameter names</h4>

<ul>
<li>Parameter names are written in lowerCamelCase</li>
<li>One-character parameter names in public methods should be avoided</li>
</ul>

<h4 id="local-variable-names">Local variable names</h4>

<ul>
<li>Local variable names are written in lowerCamelCase</li>
<li>Even when final and immutable, local variables are not considered to be constants, and should not be styled as constants</li>
</ul>

<h4 id="type-variable-names">Type variable names</h4>

<p>Each type variable is named in one of two styles:</p>

<ul>
<li>A single capital letter, optionally followed by a single numeral (e.g., E, T, X, T2)</li>
<li>A name in the form used for classes (see <a href="#class-names">Class names</a>), followed by the capital letter T (e.g., RequestT, FooBarT).</li>
</ul>

<h3 id="caught-exceptions-not-ignored">Caught exceptions (not ignored)</h3>

<p>Except as noted below, it is very rarely correct to do nothing in response to a caught exception. (Typical responses are to log it, or if it is considered &ldquo;impossible,&rdquo; rethrow it as an AssertionError)</p>

<p>When it truly is appropriate to take no action whatsoever in a catch block, the reason this is justified is explained in a comment.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">try</span> {
  <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Integer</span>.parseInt(<span style="color:#a6e22e">response</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">handleNumericResponse</span>(<span style="color:#a6e22e">i</span>);
} <span style="color:#66d9ef">catch</span> (<span style="color:#a6e22e">NumberFormatException</span> <span style="color:#a6e22e">ok</span>) {
  <span style="color:#75715e">// it&#39;s not numeric; that&#39;s fine, just continue
</span><span style="color:#75715e"></span>}
<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">handleTextResponse</span>(<span style="color:#a6e22e">response</span>);
</code></pre></div>
<h3 id="static-members-qualified-using-class">Static members (qualified using class)</h3>

<p>When a reference to a static class member must be qualified, it is qualified with that class&rsquo;s name, not with a reference or expression of that class&rsquo;s type.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">Foo</span> <span style="color:#a6e22e">aFoo</span> <span style="color:#f92672">=</span> ...;
<span style="color:#a6e22e">Foo</span>.<span style="color:#a6e22e">aStaticMethod</span>(); <span style="color:#75715e">// good
</span><span style="color:#75715e"></span><span style="color:#a6e22e">aFoo</span>.<span style="color:#a6e22e">aStaticMethod</span>(); <span style="color:#75715e">// bad
</span><span style="color:#75715e"></span><span style="color:#a6e22e">somethingThatYieldsAFoo</span>().<span style="color:#a6e22e">aStaticMethod</span>(); <span style="color:#75715e">// very bad
</span><span style="color:#75715e"></span></code></pre></div>
<h3 id="finalizers-not-used">Finalizers (not used)</h3>

<p>It is extremely rare to override <code>Object.finalize</code>.</p>

<p>Tip: Don&rsquo;t do it. If you absolutely must, first read and understand <em>Effective Java</em> by Joshua Bloch, Item 7, &ldquo;Avoid Finalizers,&rdquo; very carefully, and then don&rsquo;t do it.</p>

<h3 id="javadocs">Javadocs</h3>

<p>Javadocs are used on</p>

<ul>
<li>Public API points</li>
<li>Protected methods</li>
<li>Getters or setters that have different behavior than simply wrapping field access</li>
<li>DB Entities for documenting what the field is used for</li>
</ul>

<p>Also see adding APIDescription on the field as that is rendered  out to the API documentation.</p>

<p>Exception: overrides - Javadoc is not always present on a method that overrides a supertype method.</p>

<p>Use Block tags:</p>

<p>Any of the standard &ldquo;block tags&rdquo; that are used appear in the order @param, @return, @throws, @deprecated, and these four types never appear with an empty description. When a block tag doesn&rsquo;t fit on a single line, continuation lines are indented four (or more) spaces from the position of the @.</p>

<p>For Example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#75715e">/**
</span><span style="color:#75715e"> * Returns an Image object that can then be painted on the screen.
</span><span style="color:#75715e"> * The url argument must specify an absolute {@link URL}. The name
</span><span style="color:#75715e"> * argument is a specifier that is relative to the url argument.
</span><span style="color:#75715e"> * &lt;p&gt;
</span><span style="color:#75715e"> * This method always returns immediately, whether or not the
</span><span style="color:#75715e"> * image exists. When this applet attempts to draw the image on
</span><span style="color:#75715e"> * the screen, the data will be loaded. The graphics primitives
</span><span style="color:#75715e"> * that draw the image will incrementally paint on the screen.
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @param  url  an absolute URL giving the base location of the image
</span><span style="color:#75715e"> * @param  name the location of the image, relative to the url argument
</span><span style="color:#75715e"> * @return      the image at the specified URL
</span><span style="color:#75715e"> *
</span><span style="color:#75715e"> * @throws MalformedURLException
</span><span style="color:#75715e"> * @deprecated
</span><span style="color:#75715e">*/</span>
<span style="color:#66d9ef">public</span> Image <span style="color:#a6e22e">getImage</span><span style="color:#f92672">(</span>URL url<span style="color:#f92672">,</span> String name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
      <span style="color:#66d9ef">try</span> <span style="color:#f92672">{</span>
          <span style="color:#66d9ef">return</span> getImage<span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> URL<span style="color:#f92672">(</span>url<span style="color:#f92672">,</span> name<span style="color:#f92672">));</span>
      <span style="color:#f92672">}</span> <span style="color:#66d9ef">catch</span> <span style="color:#f92672">(</span>MalformedURLException e<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
          <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">;</span>
      <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span></code></pre></div>
<p>* Taken from <a href="https://www.oracle.com/technetwork/java/javase/documentation/index-137868.html">How to Write Doc Comments for the Javadoc Tool</a> and edited</p>

<h2 id="general">General</h2>

<ol>
<li>Business logic, Transactions, rules should be handled in the service code (core-service)</li>
<li>API Interface should have documentation (Javadocs)</li>
<li>SimpleDateFormat is not thread-safe, create new instances; don&rsquo;t make static</li>
<li>For decimal numbers use BigDecimal, and use valueOf to instantiate</li>
<li>Make sure any new code is placed in the appropriate module. Be cautious of dependencies</li>
<li>External resources should be handled by a Manager that in turn handles the lifecycle</li>
<li>Use example query framework where possible. Keep custom queries to a minimum as this allows for greater flexibility as well as type safety on the query, which in turn makes refactoring easier and reduces errors</li>
<li>Beware of any potential infinite loops</li>
<li>Pay attention to Transaction boundaries. For the most part it&rsquo;s automatic but, you can carry over transaction where it&rsquo;s unintended</li>
<li>Prefer constants over hard-coded strings. Keep constants with the entity/object they relate to.  For general constants use OpenstorefrontConstant</li>
<li>Focus comments on WHY (Business Rule) rather than HOW for internal comments.  The how should be clear from the code</li>
</ol>

<h2 id="entities">Entities</h2>

<ol>
<li>Entities should have all validation annotations marked and have documentation annotations as well</li>
<li>Use &ldquo;get&rdquo; and &ldquo;set&rdquo; and not &ldquo;is&rdquo; as are a lot of automatic processing (reflection) on entities</li>
<li>Most entities should extends the standard entity</li>
<li>Preference is to keep model flat, but there are cases where complex models are fine (meaning care should be taken with embedded complex classes)

<ul>
<li>If there are embedded entities, make to use Casacde, OneToX annotation</li>
<li>Beware of db issues</li>
<li>The DB and moxy doesn&rsquo;t handling List of primitives (meaning Boxed primitives) well (e.g. <code>List&lt;String&gt;</code> should be <code>List&lt;EmailAddresses&gt;</code>)</li>
</ul></li>
<li>Document Entities with @APIDocument to update the API docs</li>
<li>Prefer composition of entities in view rather than inheritance. Use inheritance for substitutability</li>
<li>All storage entities must be registered with the DB.  This is automatic for class in the entity package of the API module</li>
</ol>

<h2 id="rest-api">REST API</h2>

<ol>
<li>Avoid naming entity and view model fields (type or ID).  It can break the serialization</li>
<li>Use the API annotations to document the service. All REST interfaces need documentation as to purpose</li>
<li>All consumed entities must have a root object. For Example, String (fail),  TextObject with a field String (Valid)</li>
<li>Response also needs a root object.  A GenericEntity can be used</li>
<li>Resource endpoints map to entities where Services act on the system or are cross entities</li>
<li>&ldquo;Actions&rdquo; supplement the API and are used for internal operations.  Also, they use to handle uploads as there is no JAX-RS standard for that</li>
</ol>

<h2 id="cache-handling">Cache Handling</h2>

<ol>
<li>All cache handling should be done in the Services rather than leaking it up a layer of abstraction</li>
<li>Beware to not modify the cached version of the data.  There is a &ldquo;weak reference&rdquo; to the object so it can end up applying unwanted changes</li>
<li>All caches should be set up in the cache manager</li>
</ol>

<h2 id="logging">Logging</h2>

<p>Each level has a different audience (See java Docs). Add logging message appropriate for each level. Focus on logging thing that would aid in debugging (When, What, the State was at the time of the error, and Data owner, e.g., what component does it belong to).</p>

<p><em>SEVERE</em> - System Admin and End-User; the operation failed; something prevented normal execution;  If throwing an Openstorefront error please state the error and note anything that can be done to correct it</p>

<p><em>WARNING</em> - Potential Problems, System Admin or End-users, the system should be able to continue but desired effect may not have been achieved</p>

<p><em>INFO</em> - Message to System Admin usually for information about operation completed</p>

<p><em>CONFIG</em> - Messages are intended to provide a variety of static configuration information (mainly initialization of a system item)</p>

<p><em>FINE</em> - Debugging information for developers</p>

<p><em>FINER</em> - Detailed debugging information</p>

<p><em>FINEST</em> - Trace message; highly detailed.  If gathering the information is time consuming (CPU wise), then check logging level state first.  If (log.isLoggable(Level.FINEST))</p>

<p><strong>If you don&rsquo;t add logging it is not available</strong> Thus, logging needs to be added where appropriate where appropriate, typically, on anti-conditions.
Think, &ldquo;If I was troubleshooting this in production could I get enough information to solve an issue?&rdquo;
Log the data owner and state.</p>

<p>Note: Tomcat&rsquo;s loghandler doesn&rsquo;t seem to handle &ldquo;{0}&rdquo; substitution.  Use MessageFormat.format to handle that.</p>

<p>Do not use an <code>'</code> in log comments as it affects the formatter. See <a href="https://stackoverflow.com/questions/22670627/java-logger-apostrophe-issues-with-tokens">https://stackoverflow.com/questions/22670627/java-logger-apostrophe-issues-with-tokens</a></p>

<h3 id="how-to-use-logging-tools">How To Use Logging Tools</h3>

<p>Java logging has two components:</p>

<ol>
<li>Logger - These are hierarchical, meaning setting the level will be achieved by rolling upwards until the next setting.</li>
<li>Handler - These are associated with a Logger</li>
</ol>

<p>The logger has a Level and each handler has a level. Both must be set to get the output to show the level.
Logs by default show in the console output for the application server, which is typically in /logs directory but,
can be in the var server output that installs via yum.</p>

<p>Built into the application is a DB Logger which when activated will log all components in the system. At Level ALL.
Keep in mind the logger may be set at a different level.</p>

<p>It will capture the logs in the DB, and the Admin system logs can be used to view that.</p>

<p>The UI allows for setting each logger&rsquo;s level.  Setting Handler levels is not currently supported.</p>

<p>Note the logging.properties file (currently not loaded) sets defaults. By default the console handler is set to INFO.</p>

<h2 id="cross-cutting-concerns">Cross Cutting Concerns</h2>

<p><strong>Security</strong> - Ensure permission are applied to the REST/External API and UI features.</p>

<p><strong>Logging</strong> - Security changes/sensitivity must have audit logging (Log action, who performed it).</p>

<p><strong>Data Restriction</strong> - Ensure data that should be restricted is restricted at the appropriate level.  This is not applied universally, as there are complications that require specific handling.</p>

<p><strong>Change History</strong> - Entries and Evaluations are supported. Log field changes, adds, removes, etc.</p>

<p><strong>Alerts</strong> - Certain events must be tracked for administration alerts.</p>

<p>Use caution when modifying the code to keep these features/requirements intact.</p>

    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/dev/codestandards/front-end-code-standard/" title="Front-end Code Standards"> <i class="fa fa-chevron-left"></i><label>Front-end Code Standards</label></a>
    <a class="nav nav-next" href="/releasenotes/" title="Release Notes" style="margin-right: 0px;"><label>Release Notes</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>