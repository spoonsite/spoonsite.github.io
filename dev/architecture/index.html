<!DOCTYPE html>
<html>
  <head>
    <title>SPOON Site Documentation</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-09-09T15:45:28 MDT">
<title>Architecture :: SPOON Site Documentation</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

  <link href="/theme-original/variant-blue.css" rel="stylesheet">


<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/dev/architecture/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="showVisitedLinks">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <h4 style="color:white;">SPOON Documentation</h4>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="Search...">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/user/" class="dd-item haschildren
        ">
      <div>
      <a href="/user/">User</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/user/bulk-upload-process/" class="dd-item">
        <div>
          <a href="/user/bulk-upload-process/">
            Bulk Upload Process
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/userguide/" class="dd-item">
        <div>
          <a href="/user/userguide/">
            User Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/quick-overview-of-submitting-a-new-component/" class="dd-item">
        <div>
          <a href="/user/quick-overview-of-submitting-a-new-component/">
            Submitting a New Component
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/user/unitlegend/" class="dd-item">
        <div>
          <a href="/user/unitlegend/">
            Unit Legend
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/applicationadmin/" class="dd-item haschildren
        ">
      <div>
      <a href="/applicationadmin/">Application Admin</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/applicationadmin/customsubmissionforms/" class="dd-item">
        <div>
          <a href="/applicationadmin/customsubmissionforms/">
            Custom Submission Forms
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/workplans/" class="dd-item">
        <div>
          <a href="/applicationadmin/workplans/">
            Workplans
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/applicationadmin/securityroles/" class="dd-item">
        <div>
          <a href="/applicationadmin/securityroles/">
            Security Roles
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/systemadmin/" class="dd-item haschildren
        ">
      <div>
      <a href="/systemadmin/">System Admin</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/systemadmin/setup/" class="dd-item">
        <div>
          <a href="/systemadmin/setup/">
            Setup
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/docker/" class="dd-item">
        <div>
          <a href="/systemadmin/docker/">
            Docker
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/administratorguide/" class="dd-item">
        <div>
          <a href="/systemadmin/administratorguide/">
            Administrator Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/datamigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/datamigrationguide/">
            Data Migration Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/systemadmin/versionmigrationguide/" class="dd-item">
        <div>
          <a href="/systemadmin/versionmigrationguide/">
            Version Migration
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/dev/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/dev/">Developer</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/dev/developersguide/" class="dd-item">
        <div>
          <a href="/dev/developersguide/">
            Developer Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/architecture/" class="dd-item active">
        <div>
          <a href="/dev/architecture/">
            Architecture
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/front-end-code-standard/" class="dd-item">
        <div>
          <a href="/dev/front-end-code-standard/">
            Front-end Code Standards
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/uiguide/" class="dd-item">
        <div>
          <a href="/dev/uiguide/">
            User Interface Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/dev/server-code-standard/" class="dd-item">
        <div>
          <a href="/dev/server-code-standard/">
            Server Code Standard
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/evaluations/" class="dd-item haschildren
        ">
      <div>
      <a href="/evaluations/">Evaluations</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/evaluations/evaluator/" class="dd-item haschildren
        ">
      <div>
      <a href="/evaluations/evaluator/">Evaluator</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/evaluations/evaluator/storefront-evaluators-guide/" class="dd-item">
        <div>
          <a href="/evaluations/evaluator/storefront-evaluators-guide/">
            Evaluators Guide
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/evaluations/evaluator/faq/" class="dd-item">
        <div>
          <a href="/evaluations/evaluator/faq/">
            FAQ
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/evaluations/librarian/" class="dd-item haschildren
        ">
      <div>
      <a href="/evaluations/librarian/">Librarian</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
        </ul>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/spoonsite/spoon/tree/master" target="_blank" rel="noopener"><i class='fa fa-github'></i> Github repo</a></li>
                <li class="" role=""><a href="https://github.com/spoonsite/spoon/releases" target="_blank" rel="noopener"><i class='fa fa-download'></i> Releases</a></li>
        </section>
            <a id="clear-history" class="" href="#" data-clear-history-toggle=""><i class="fa  fa-history"></i> Clear History</a>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer"><div style="color: #E0E0DA;">
    <p>SPOONsite version 2.10</p>
    <p>Documentation generated on Sep 9, 2019</p>
    <p>Created using <a href="https://gohugo.io/">Hugo</a> version 0.54.0</p>
</div>
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/spoonsite/spoon/edit/master/Hugo-StaticGen-Docs/content/dev/Architecture.md" target="blank">
        <i class="fa fa-code-fork"></i>
        Improve this page
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/'>SPOON Documentation</a> > <a href='/dev/'>Developer</a> > Architecture

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li><a href="#1-client-architecture">1.  Client Architecture</a>
<ul>
<li><a href="#1-1-client-architecture-diagram">1.1 Client Architecture Diagram</a></li>
<li><a href="#1-2-client-details">1.2 Client Details</a></li>
</ul></li>
<li><a href="#2-server-architecture">2.  Server Architecture</a>
<ul>
<li><a href="#2-1-server-architecture-diagram">2.1 Server Architecture Diagram</a></li>
<li><a href="#2-2-server-details">2.2 Server Details</a></li>
<li><a href="#2-3-storage-details">2.3 Storage Details</a></li>
</ul></li>
<li><a href="#3-runtime-environment">3. Runtime Environment</a>
<ul>
<li><a href="#3-1-runtime-environment-diagram">3.1 Runtime Environment Diagram</a></li>
<li><a href="#3-2-runtime-details">3.2 Runtime Details</a></li>
<li><a href="#3-3-runtime-component-integration-vectors">3.3 Runtime Component Integration Vectors</a></li>
<li><a href="#3-4-component-integration-vectors-details">3.4 Component Integration Vectors Details</a></li>
<li><a href="#3-5-ports">3.5 Ports</a></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Architecture</h1>
  



    
    
    
    <p>This guide describes the high-level design of the server and client architecture.</p>

<h1 id="1-client-architecture">1.  Client Architecture</h1>

<h2 id="1-1-client-architecture-diagram">1.1 Client Architecture Diagram</h2>

<p><img src="/images/client-archtechture-new.png" alt="clientarch" /></p>

<p>Figure 1. Client Architecture Diagram</p>

<h2 id="1-2-client-details">1.2 Client Details</h2>

<p>The client core structure is based on Ext.js which provides UI components and utilities. This reduces third-part dependencies significantly which in turn reduce maintenance, learning curve and improves quality and consistency.</p>

<p>Added to that is application specific overrides and high-level components created to facilitate re-use.
The application is composed by stripes layouts with a top-level page and fragment tool pages.</p>

<h1 id="2-server-architecture">2.  Server Architecture</h1>

<h2 id="2-1-server-architecture-diagram">2.1 Server Architecture Diagram</h2>

<p><img src="/images/serverarch.png" alt="serverarch" /></p>

<p>Figure 2. Server Architecture Diagram</p>

<h2 id="2-2-server-details">2.2 Server Details</h2>

<p>Component definitions are as shown below:</p>

<ul>
<li><strong>Security</strong>        - Authentication and authorization is delegated to OpenAm. This is configured through a custom realm using the Apache Shiro library. All request are passed through this filter.</li>
<li><strong>REST API</strong>       - The REST API is the component that handles the data interaction between the clients and provides the interface with which the clients can communicate. The REST API is broken into two sections: resources and services. Resources handle the CRUD operations on the data. Service handle operation across data sets. This provides a clean and clear API for integrators.</li>
<li><strong>API Docs</strong>       - The API docs are generated live based on the currently running code. This keeps the documents always current and reduces maintenance. Other system related call backs (e.g., retrieving binary resources, login handling, etc.) are handled through the Stripes framework.</li>
<li><strong>Business Layer</strong>  - Handles all rules applied to the data as well transaction support.
<br /></li>
</ul>

<blockquote>
<ul>
<li><strong>Managers</strong>   - The role of the manager class is to handle the interaction with a resource. This allow for clean initialization and shutdown of resources and provides centralized access.

<ul>
<li><strong>Services</strong>    - Each service is in charge of handling a specific group of Entity models. Services provide transaction support and business logic handling. All services are accessed through a service proxy class.  The service proxy class provides auto transaction and service interception support.</li>
<li><strong>Models</strong>  - The entity models represent the data in the system and provide the bridge from the application to the underlying storage.<br /></li>
<li><strong>Import / Export</strong> -Provides a mechanism for loading and transferring data from one system to another.</li>
</ul></li>
</ul>
</blockquote>

<p>The server build environment relies on the following platforms/tools:</p>

<ul>
<li><strong>Java</strong>     -            Core language and platform</li>
<li><strong>Maven</strong>   -            Used for the project structure, building and dependency management</li>
</ul>

<h2 id="2-3-storage-details">2.3 Storage Details</h2>

<p><img src="/images/storage.png" alt="storage" /></p>

<p><strong>File System</strong>  - Holds configuration, resources, media, imports, reports and plugins.  By default under: /var/openstorefront it can be changed by setting the system property -Dapplication.datadir=<directory> on the command line.</p>

<p><strong>Solr or Elasticsearch</strong> - Use to do fuzzy index searches across the entries.  It&rsquo;s kept in sync by the application.</p>

<p><strong>Database</strong> - Holds all entry data and application data.</p>

<h1 id="3-runtime-environment">3. Runtime Environment</h1>

<h2 id="3-1-runtime-environment-diagram">3.1 Runtime Environment Diagram</h2>

<p><img src="/images/deployarch.png" alt="deployarch" /></p>

<p>Figure 3 . Runtime Environment diagram</p>

<h2 id="3-2-runtime-details">3.2 Runtime Details</h2>

<p>The runtime environment relies upon the following applications:</p>

<ul>
<li><strong>Proxy Server</strong>   -   This is an external system that proxies requests to the application server.</li>
<li><strong>Tomcat 7</strong>  -    Tomcat is the web container used to host the storefront application.</li>
<li><strong>Java 8</strong>  -            It the runtime platform which runs Tomcat</li>
<li><strong>OS/VM</strong>  -             Is the host machines operating system</li>
<li><strong>Solr</strong>          -    Enterprise search appliance that runs externally</li>
<li><strong>OpenAM</strong>    -        OpenAM runs externally and a policy agent in Tomcat make sure the site is secure.</li>
</ul>

<h2 id="3-3-runtime-component-integration-vectors">3.3 Runtime Component Integration Vectors</h2>

<p><img src="/images/civarch.png" alt="component vectors" /></p>

<p>Figure 4. Runtime Component Integration Vectors</p>

<h2 id="3-4-component-integration-vectors-details">3.4 Component Integration Vectors Details</h2>

<p>The component integration vectors (CIV) are show below.</p>

<p><strong>Source Component</strong>:  openstorefront<br />
 <strong>Class</strong>:  C<br />
 <strong>Target Component</strong>:      Solr or Elasticsearch<br />
<strong>Notes</strong></p>

<p><strong>Source Component</strong>:  openstorefront<br />
 <strong>Class</strong>:  C<br />
 <strong>Target Component</strong>:      OpenAM<br />
<strong>Notes</strong>: OpenAM with their policy agent; requires a hard tie to the application and the application server</p>

<p><strong>Source Component</strong>:  openstorefront<br />
 <strong>Class</strong>:  B<br />
 <strong>Target Component</strong>:      Solr or Elasticsearch<br />
<strong>Notes</strong>: JEE Application Server   Currently configured to deploy on Tomcat</p>

<p><strong>Source Component</strong>:    Orient DB<br />
 <strong>Class</strong>:  B<br />
 <strong>Target Component</strong>:     openstorefront<br />
<strong>Notes</strong>: Embedded</p>

<p><strong>Source Component</strong>:   JEE Application Server<br />
 <strong>Class</strong>:  A<br />
 <strong>Target Component</strong>:      OS/VM<br />
<strong>Notes</strong>: Currently targeted for CentOS</p>

<hr />

<p>The CIVs represent an integration activity involving a source, Component
A, and a target, Component B.</p>

<p>The CIVs, as defined by the DI2E PMO, are as follows:</p>

<ul>
<li><p><strong>Class A: A-deployed On-B</strong>. Component B is the underlying
environment (providing resources) for A; B does not actively manage
A (e.g. OS, VM).</p></li>

<li><p><strong>Class B: A-contained In-B</strong>. Component &ldquo;lives in&rdquo;  B; B manages
the lifecycle of A, from cradle to grave. (e.g. Widget in OWF; EJB
in JEE server; OSGi bundle in Karaf; SCA).</p></li>

<li><p><strong>Class C: A-interfaces With-B</strong>. Component A initiates
communication with B via API(s). (e.g., JDBC, JMS, REST/SOAP call,
legacy communications)</p></li>

<li><p><strong>Class D: A-indirectly Consumes-B</strong>. Component A has a dependency
o.n data/functionality of B even though it doesn&rsquo;t interface with B.
(e.g. subscriber/publisher relationship; A integrates with another
component that offers data from B).</p></li>
</ul>

<h2 id="3-5-ports">3.5 Ports</h2>

<p>The applicable ports are shown below:</p>

<p><strong>Port (Defaults):</strong>  8080
<strong>Description:</strong> Tomcat HTTP
<strong>Type:</strong> Inbound</p>

<p><strong>Port (Defaults):</strong>  8009
<strong>Description:</strong> Tomcat AJP
<strong>Type:</strong> Inbound  (Open if not using 8080)</p>

<p><strong>Port (Defaults):</strong>  2424
<strong>Description:</strong> OrientDB
<strong>Type:</strong> Internal  (Shouldn&rsquo;t be exposed externally)</p>

<p><strong>Port (Defaults):</strong>  2480
<strong>Description:</strong> OrientDB
<strong>Type:</strong> Internal  (Shouldn&rsquo;t be exposed externally)</p>

<p><strong>Port (Defaults):</strong>  8983
<strong>Description:</strong> Solr (If used)
<strong>Type:</strong> Outbound (Used internally doesn&rsquo;t need to be exposed outside the system)</p>

<p><strong>Port (Defaults):</strong>  9300
<strong>Description:</strong> Elasticsearch (If used; Binary and the one used by the application)
<strong>Type:</strong> Outbound (Used internally does not need to be exposed outside the system)</p>

<p><strong>Port (Defaults):</strong>  9200
<strong>Description:</strong> Elasticsearch (If used; JSON)
<strong>Type:</strong> Outbound (Used internally does not need to be exposed outside the system)</p>

<p><strong>Port (Defaults):</strong>  8080
<strong>Description:</strong> OpenAM running on Tomcat; Setups on this vary so this just represents one case
<strong>Type:</strong> Outbound  (External application)</p>

<hr />

<p>All ports are configurable via configuration for the respected applications. Additional ports maybe be used depending on configuration.</p>

    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
<a class="nav nav-prev" href="/dev/developersguide/" title="Developer Guide"> <i class="fa fa-chevron-left"></i><label>Developer Guide</label></a>
    <a class="nav nav-next" href="/dev/front-end-code-standard/" title="Front-end Code Standards" style="margin-right: 0px;"><label>Front-end Code Standards</label><i class="fa fa-chevron-right"></i></a></div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>